<!DOCTYPE html>
<html>
<head>

<meta charset="utf-8">

<title>Gridbee Grid Client</title>

<script type="text/javascript" src="lib/jquery.js"></script>
<script type="text/javascript" src="lib/jquery.tmpl.js"></script>
<script type="text/javascript" src="lib/knockout.js"></script>
<script type="text/javascript" src="lib/framework.js"></script>
<script type="text/javascript" src="gridbee.js"></script>

<link rel="stylesheet" type="text/css" href="gridbee.css" />

</head>
<body>

<div class="worksource header">
  <div class="workunits">
    <div id="app-name"> GRIDBEE </div>
    <div id="app-description"> the grid computing web app </div>

    <div id="runcontrol" onselectstart="return false;"
         data-bind="click : function() {running(!running());},
                    css : {running : running(), stopped : !running()}">
      <span class="stop">&#x25FC</span>
      <span class="play">&#x25B6</span>
    </div>

    <div id="threadnumber" onselectstart="return false;">
      <span class="minus" data-bind="click : function() {if (threads() > 1) threads(threads() - 1)}">
        -
      </span><span class="number" data-bind="text : threads">
      </span><span class="plus" data-bind="click : function() {threads(threads() + 1)}">
        +
      </span>
    </div>

    <div id="state-describtion">
      <b>Running</b> on <b>3</b> threads
    </div>
  </div>

  <div class="information">
    <h1 tab="none" onclick="selectTab(this.getAttribute('tab'))" class="selected">
      Overview
    </h1>
    <h1 tab="newworksource" onclick="selectTab(this.getAttribute('tab'))">
      Add new worksource
    </h1>
  </div>
</div>

<div id="tabs"
     data-bind="template: {name : 'worksource-tab', foreach : worksources}">

  <script type="text/html" id="worksource-tab">
  <div data-bind="attr : {id : 'worksource-' + id}">
    <h1 data-bind="text: name"></h1>
  </div>
  </script>

  <div id="newworksource">
    <h1>Add new worksource</h1>
  </div>

</div>

<script>
  function selectTab(tab) {
    if (tab === 'none') {
      $('#tabs').removeClass('active');
    } else {
      $('#tabs').addClass('active');
      $('#tabs #' + tab).addClass('selected')
                        .siblings().removeClass('selected')
    }

    $('[tab]').removeClass('selected');
    $('[tab="' + tab + '"]').addClass('selected');
  }
</script>

<div id="worksourcelist"
     data-bind="template: {name : 'worksource', foreach : worksources}">

  <script type="text/html" id="worksource">
    <div class="worksource">

      <ul class="workunits"
          data-bind="template : {name : 'workunit', foreach : workunits}">
      </ul>

      <div class="information">
        <h1 data-bind="text : name, attr : {tab : 'worksource-' + id}"
            onclick="selectTab(this.getAttribute('tab'))">
        </h1>
      </div>

    </div>
  </script>

  <script type="text/html" id="workunit">
    <li class="workunit">
      <span class="status"
            data-bind="text : status">
      </span>

      <div class="meter">
        <span data-bind="style : {width : progress()*100 + '%'}">
      </div>
    </li>
  </script>

</div>









<div style="display: none" id="top">
  <span id="appname">GRIDBEE</span>
  <span id="appdescription">the WebComputing grid client</span>

  <div id="runcontrol" onselectstart="return false;"
       data-bind="click : function() {running(!running());},
                  css : {running : running(), stopped : !running()}">
    <span class="stop">&#x25FC</span>
    <span class="play">&#x25B6</span>
  </div>

  <div id="threadnumber" onselectstart="return false;">
    <span class="minus" data-bind="click : function() {if (threads() > 1) threads(threads() - 1)}">
      -
    </span><span class="number" data-bind="text : threads">
    </span><span class="plus" data-bind="click : function() {threads(threads() + 1)}">
      +
    </span>
  </div>
  <span id="threadnumber-description">simultaneously running workunit allowed</span>

  <img id="terminalpanel-button" src="img/terminal.png"
       onclick="$('.panel').toggleClass('active');$(this).toggleClass('active')" />
</div>

<div style="display: none" class="panel log log-main" id="logpanel">
</div>

<div style="display: none" class="panel active" id="mainpanel">

  <div id="newworksource" class="worksource active"
       data-bind="css : {active : worksources().length === 0}">
    <h3>Add new worksource</h3>

    <img class="settingsbutton" src="img/plus.png"
         onclick="$('#skeletons').toggle()" />

    <ul id="skeletons"
        data-bind="style : {display : worksources().length ? 'none' : undefined}">
    </ul>

    <script type="text/html" id="skeleton">
      <li id="skeleton-${ type }" class="{{if type == 'boinc' }}active selected{{/if}} skeleton">
        <div class="logo"
             onclick="$(this).parent().toggleClass('selected')
                                      .siblings().toggleClass('active');">
          <img title="${ description }" src="img/${ type }/logo.png">
        </div>
        <div class="createform"
             data-bind="template : {name : 'createform-${ type }',
                                    data : skeletons.${ type } }">
        </div>
      </li>
    </script>
  </div>


</div>

<script type="text/html" id="settings-boinc">
<p>
  Project name: <span data-bind="text : projectname"></span>
</p>
<p>
  Project url:
  <a data-bind="text : projecturl, attr : {href : projecturl}"></a>
</p>
<p>
  Authentication key: <span data-bind="text : authkey"></span>
</p>
</script>

<script type="text/html" id="createform-boinc">
<div class="fieldset">
  <label class="enabled">Project url:</label>
  <input data-bind="value : projecturl,
                    valueUpdate: 'keyup'" />
</div>
<div class="or">
  <div class="fieldset">
    <label data-bind="css : {enabled : scheduler().length != 0}">
      Login name:
    </label>
    <input data-bind="enable : scheduler().length != 0,
                      value : username,
                      valueUpdate: 'keyup'"/>
    <label data-bind="css : {enabled : scheduler().length != 0}">
      Password:
    </label>
    <input data-bind="enable : scheduler().length != 0,
                      value : password,
                      valueUpdate: 'keyup'" />
  </div>
  <div class="fieldset">
    <label data-bind="css : {enabled : scheduler().length != 0 &&
                                       username().length == 0 &&
                                       password().length == 0}">
      Authkey:
    </label>
    <input data-bind="enable : scheduler().length != 0 &&
                               username().length == 0 &&
                               password().length == 0,
                      value : authkey,
                      valueUpdate: 'keyup'" />
  </div>
</div>
<div class="submit">
  <button data-bind="enable : ok,
                     click : create">
    Create
  </button>
  <p data-bind="html : error" class="error"></p>
</div>
</script>

</body>
</html>
